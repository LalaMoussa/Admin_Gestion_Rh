<div class="main">
    <div class="toolbar">
      <input type="text" [(ngModel)]="searchQuery" placeholder="Rechercher un technicien..." class="search-bar"/>
      <button (click)="toggleForm()" class="add-button">Ajouter un technicien</button>
    </div>
  
    <!-- Titre de la section -->
    <div class="section-title">
      <h1>Liste des Techniciens</h1>
    </div>
  
    <!-- Table des techniciens -->
    <div class="table-container">
      <table class="technician-table">
        <thead>
          <tr>
            <th>Matricule</th>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Date de recrutement</th>
            <th>Date de naissance</th>
            <th>Téléphone</th>
            <th>Email</th>
            <th>CIN</th>
            <th>Adresse</th>
            <th>Situation familiale</th>
            <th>Fonction</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tech of filteredTechniciens">
            <td>{{ tech.matricule }}</td>
            <td>{{ tech.nom }}</td>
            <td>{{ tech.prenom }}</td>
            <td>{{ tech.dateRecrutement }}</td>
            <td>{{ tech.dateNaissance }}</td>
            <td>{{ tech.telephone }}</td>
            <td>{{ tech.email }}</td>
            <td>{{ tech.cin }}</td>
            <td>{{ tech.adresseRue }}, {{ tech.adresseVille }}, {{ tech.adresseRegion }}, {{ tech.adresseCodePostal }}</td>
            <td>{{ tech.situationFamiliale }}</td>
            <td>{{ tech.fonction }}</td>
            <td>
              <button (click)="editTechnicien(tech.id)" class="edit-button">Modifier</button>
              <button (click)="deleteTechnicien(tech.id)" class="delete-button">Supprimer</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <!-- Pagination -->
    <div class="pagination">
      <button *ngFor="let page of [].constructor(totalPages); let i = index" 
              [ngClass]="{'active': currentPage === i + 1}" 
              (click)="goToPage(i + 1)">
        {{ i + 1 }}
      </button>
    </div>
  
    <!-- Modal Formulaire -->
    <div [ngClass]="{'modal': true, 'active': showForm}">
      <div class="modal-content">
        <span class="close" (click)="toggleForm()">&times;</span>
        <h2>{{ editIndex !== null ? 'Modifier Technicien' : 'Ajouter Technicien' }}</h2>
        <form (ngSubmit)="saveTechnicien()">
          <div class="form-row">
            <div class="form-group">
              <label for="matricule">Matricule:</label>
              <input type="text" id="matricule" [(ngModel)]="technicien.matricule" name="matricule" required />
            </div>
            <div class="form-group">
              <label for="nom">Nom:</label>
              <input type="text" id="nom" [(ngModel)]="technicien.nom" name="nom" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="prenom">Prénom:</label>
              <input type="text" id="prenom" [(ngModel)]="technicien.prenom" name="prenom" required />
            </div>
            <div class="form-group">
              <label for="dateRecrutement">Date de recrutement:</label>
              <input type="date" id="dateRecrutement" [(ngModel)]="technicien.dateRecrutement" name="dateRecrutement" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="dateNaissance">Date de naissance:</label>
              <input type="date" id="dateNaissance" [(ngModel)]="technicien.dateNaissance" name="dateNaissance" required />
            </div>
            <div class="form-group">
              <label for="numeroTelephone">Téléphone:</label>
              <input type="tel" id="numeroTelephone" [(ngModel)]="technicien.telephone" name="numeroTelephone" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" id="email" [(ngModel)]="technicien.email" name="email" required />
            </div>
            <div class="form-group">
              <label for="numeroCIN">CIN:</label>
              <input type="text" id="numeroCIN" [(ngModel)]="technicien.cin" name="numeroCIN" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="adresseRue">Adresse Rue:</label>
              <input type="text" id="adresseRue" [(ngModel)]="technicien.adresseRue" name="adresseRue" required />
            </div>
            <div class="form-group">
              <label for="adresseVille">Adresse Ville:</label>
              <input type="text" id="adresseVille" [(ngModel)]="technicien.adresseVille" name="adresseVille" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="adresseRegion">Adresse Région:</label>
              <input type="text" id="adresseRegion" [(ngModel)]="technicien.adresseRegion" name="adresseRegion" required />
            </div>
            <div class="form-group">
              <label for="adresseCodePostal">Adresse Code Postal:</label>
              <input type="text" id="adresseCodePostal" [(ngModel)]="technicien.adresseCodePostal" name="adresseCodePostal" required />
            </div>
          </div>
          <div class="form-group">
            <label for="situation-familiale">Situation Familiale</label>
            <select id="situation-familiale" name="situation-familiale" [(ngModel)]="technicien.situationFamiliale" required>
              <option value="" disabled>Choisissez une option</option>
              <option value="marie">Marié</option>
              <option value="divorce">Divorcé</option>
              <option value="celibataire">Célibataire</option>
              <option value="veuf">Veuf</option>
            </select>
          </div>
          <div class="form-group">
            <label for="fonction">Fonction:</label>
            <input type="text" id="fonction" [(ngModel)]="technicien.fonction" name="fonction" required />
          </div>
          <div class="form-actions">
            <button type="submit" [disabled]="!isFormValid()" class="submit-button">Ajouter</button>
            <button type="button" class="cancel" (click)="toggleForm()">Annuler</button>
          </div>
        </form>
      </div>
    </div>
  
    <!-- Notifications Toast -->
    <div *ngIf="toastMessage" class="toast" [ngClass]="{'show': toastMessage}">
      {{ toastMessage }}
    </div>
  </div>
  